/*!
 * dependsOn v1.0.1
 * a jQuery plugin to facilitate the handling of form field dependencies.
 *
 * Copyright 2014 David Street
 * Licensed under the MIT license.
 */
!function(e){var t=function(t,s){this.selector=t,this.$dependencyObj=e(t),this.qualifiers=s};t.prototype.enabled=function(t){if(e(this.selector+"[disabled]").length>0){if(t)return!1}else if(!t)return!1;return!0},t.prototype.checked=function(e){return"checkbox"===this.$dependencyObj.attr("type")&&(!this.$dependencyObj.is(":checked")&&e||this.$dependencyObj.is(":checked")&&!e)?!1:!0},t.prototype.values=function(t){var s=this.$dependencyObj.val(),n=t.length,i=0,r=!1;for("radio"===this.$dependencyObj.attr("type")&&(s=this.$dependencyObj.filter(":checked").val()),i;n>i;i+=1)if("array"==typeof s||"object"==typeof s){if(0===e(this.$dependencyObj.val()).not(e(t[i])).length&&0===e(t[i]).not(e(this.$dependencyObj.val())).length){r=!0;break}}else if(t[i]===s){r=!0;break}return r},t.prototype.not=function(e){var t=this.$dependencyObj.val(),s=e.length,n=0;for(n;s>n;n+=1)if(e[n]===t)return!1;return!0},t.prototype.match=function(e){var t=this.$dependencyObj.val(),s=e;return s.test(t)},t.prototype.contains=function(t){var s=this.$dependencyObj.val(),n=0;if("array"!=typeof s&&"object"!=typeof s)return this.values(t);for(n in t)if(-1!==e.inArray(t[n],s))return!0;return!1},t.prototype.email=function(e){var t=/^[_a-zA-Z0-9\-\+]+(\.[_a-zA-Z0-9\-\+]+)*@[a-zA-Z0-9\-]+(\.[a-zA-Z0-9\-]+)*\.(([0-9]{1,3})|([a-zA-Z]{2,3})|(aero|coop|info|museum|name))$/;return this.match(t)===e},t.prototype.url=function(e){var t=/(((http|ftp|https):\/\/)|www\.)[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?\^=%&:\/~\+#!]*[\w\-\@?\^=%&\/~\+#])?/;return this.match(t)===e},t.prototype.doesQualify=function(){var e=0;for(e in this.qualifiers){if(!t.prototype.hasOwnProperty(e)||"function"!=typeof t.prototype[e])return this.qualifiers[e](this.$dependencyObj.val());if(!this[e](this.qualifiers[e]))return!1}return!0};var s=function(e){var s=0;this.dependencies=[];for(s in e)this.dependencies.push(new t(s,e[s]))};s.prototype.doesQualify=function(){var e=this.dependencies.length,t=0,s=!0;for(t;e>t;t+=1)if(!this.dependencies[t].doesQualify()){s=!1;break}return s};var n=function(t,s,n){this.dependencySets=[],this.$subject=t,this.settings=e.extend({disable:!0,hide:!0,duration:200,trigger:"change",onEnable:function(){},onDisable:function(){}},n),this.settings.trigger+=this.settings.trigger.search(".dependsOn")>-1?"":".dependsOn",this.init(s)};n.prototype.init=function(e){this.addSet(e),this.check(!0)},n.prototype.addSet=function(e){var t,n=this,i=0,r=0,a=0;for(this.dependencySets.push(new s(e)),i=this.dependencySets.length-1,r=this.dependencySets[i].dependencies.length,a;r>a;a+=1)t=this.dependencySets[i].dependencies[a],t.$dependencyObj.on(this.settings.trigger,function(e){n.triggeredEvent=e,n.triggeredDependency=this,n.check()}),"text"===t.$dependencyObj.attr("type")&&t.$dependencyObj.on("keypress",function(e){e.which&&t.$dependencyObj.is(":focus")&&n.check()&&(n.triggeredEvent=e,n.triggeredDependency=this,n.check())})},n.prototype.or=function(e){return this.addSet(e),this.check(!1),this},n.prototype.getValueTarget=function(){var t=this.$subject;return this.settings.hasOwnProperty("valueTarget")&&void 0!=this.settings.valueTarget?t=e(this.settings.valueTarget):"input"!==this.$subject[0].nodeName.toLowerCase()&&"textarea"!==this.$subject[0].nodeName.toLowerCase()&&"select"!==this.$subject[0].nodeName.toLowerCase()&&(t=this.$subject.find("input, textarea, select")),t},n.prototype.toggleSubjectDisplay=function(e,t){var s,n=this.$subject.attr("id");s="label"===this.$subject.parent()[0].nodeName.toLowerCase()?this.$subject.parent():this.$subject.add('label[for="'+n+'"]'),e&&"none"===s.css("display")?t?s.show():s.fadeIn(this.settings.duration):e||(t?s.css({display:"none"}):s.fadeOut(this.settings.duration))},n.prototype.enable=function(e){{var t=this.getValueTarget();this.$subject.attr("id")}this.settings.disable&&this.$subject.removeAttr("disabled"),this.settings.hide&&this.toggleSubjectDisplay(!0,e),this.settings.hasOwnProperty("valueOnEnable")&&void 0!==this.settings.valueOnEnable&&t.val(this.settings.valueOnEnable),this.settings.hasOwnProperty("checkOnEnable")&&(this.settings.checkOnEnable?t.attr("checked","checked"):t.removeAttr("checked")),this.settings.hasOwnProperty("toggleClass")&&void 0!==this.settings.toggleClass&&this.$subject.addClass(this.settings.toggleClass),this.settings.onEnable.call(this.triggeredDependency,this.triggeredEvent)},n.prototype.disable=function(e){{var t=this.getValueTarget();this.$subject.attr("id")}this.settings.disable&&this.$subject.attr("disabled","disabled"),this.settings.hide&&this.toggleSubjectDisplay(!1,e),this.settings.hasOwnProperty("valueOnDisable")&&void 0!==this.settings.valueOnDisable&&t.val(this.settings.valueOnDisable),this.settings.hasOwnProperty("checkOnDisable")&&(this.settings.checkOnDisable?t.attr("checked","checked"):t.removeAttr("checked")),this.settings.hasOwnProperty("toggleClass")&&void 0!==this.settings.toggleClass&&this.$subject.removeClass(this.settings.toggleClass),this.settings.onDisable.call(this.triggeredDependency,this.triggeredEvent)},n.prototype.check=function(e){var t=this.dependencySets.length,s=0,n=!1;for(s;t>s;s+=1)if(this.dependencySets[s].doesQualify()){n=!0;break}return n?(this.enable(e),!0):(this.disable(e),!1)},e.fn.dependsOn=function(e,t){var s=new n(this,e,t);return s},window.DependencyCollection=n,window.DependencySet=s,window.Dependency=t}(jQuery);